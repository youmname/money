# 课程

## 单词

### 课程的选择

- 右上角筛选

	- 筛选

		- 最近

		- 收藏

		- 已解锁

		- 全部

		- 条件可以同时存在

- 左上角按钮

	- 返回

- 类别

	- 收藏

		- 每个课程右上角有可以点击的星星收藏

		- 未解锁的为灰色

	- 小学

	- 初中

	- 高中

	- 大学

		- 专升本

		- 四级

		- 六级

		- 专四

		- 专八

		- 考研

		- 考博

	- 雅思

	- 托福

### 自定义设置章节

- 在设置按钮中

	- 可自由指定每个章节的单词格式

		- 从数据库中自动获取

	- 可以统一设定为固定个数，最后剩余的为单独的一章节

	- 也可也在这个基础上，再单独指定某几个章节为特殊的格式

	- 要求：速度要快最多2秒，所以需要数据库中数据合理，查找和筛选合理

- 解锁的课程，里面的所有章节都是解锁的

### 模拟上课环节

- 课前剪纸盒

	- 选择不认识的单词学习

		- 每个学生在该节课中的对于每个单词都有一个状态，认识和不认识，不认识通过学习之后，也会变成认识状态

		- 同时对于每个单词需要有一个做题状况的标准，第一次就答对了则为非错题，否则为错题

		- 页面也需要标记状态，标准此时为选择单词的阶段，这个阶段的选择会影响后面页面的单词呈现，如果后期返回到这个页面，则该页面所有的单词也要发生变化

			- 这些学生的对于每个单词的学习状态的数据优先从数据库中获取，如果没有记录则使用默认的记录开始上课，有记录说明他是在复习，但是对于老师部分则全部从默认状态开始

			- 原来认识：变为了不认识，则后续需要重新学习
原来不认识的：变为了认识，则后续不需要学习，但是如果又再次点会了不认识，则后续学习的结果不发生变化，保留当堂课学习的记录，不管多少次从不认识到认识再到不认识都是如此，

			- 所以后续的单词需要做到一点：
在本节课中所有单词的每个页面的状态都是需要存储下来的，所有发生更新，建议放在本地缓存中，随机发生调整变化，下课之后再写入数据库


			- 对于老师备课阶段，则是老师自己的单词状态，不需要写入数据库中，在下课之后，只需要清除缓存中关于这节课的单词学习数据即可

			- 如果是在正式上课阶段，则是属于对应学生的单词学习数据，在下课后写入该学生的数据库中，在下课之后，需要清除缓存中关于这节课的单词学习数据

			- 同时所有单词的状态名称需要精确的年月日时以及课程和对象：
例如：这个happy的单词状态
那么就是20251217X1-23:unkown_worry
删除的时候也需要精准删除，避免删除了一些通用的缓存信息，这个点需要格外的小心

				- 场景 1：你返回去把 happy 从“不认识”改成“认识”

最稳的存法：同一个记录只更新，不新增一堆 Key

数据结构示例（按课次 + 页 保存）：

{
  "lessonId": "L20251217_001",
  "pageId": "P03",
  "words": {
    "happy": {
      "known": true,
      "isWrong": false,
      "stage": "learn",
      "updatedAt": 1734457200000
    }
  }
}


你改状态只要：

找到 words.happy

改 known

更新时间 updatedAt

			- 同时最后分为：
学习良好:课前认识
学习良好：不认识-非错题
需要回顾：不认识-错题
但都是要加入抗遗忘的

		- 工具栏中

			- 选择发音

				- 英音

				- 美音

			- 全选按钮

			- 返回按钮

			- 下一环节按钮

				- 只有对所有单词进行了选择才会亮

				- 或者是这个环节已经经历过了，我只是现在回来修改而已，也可以亮，所有在缓存中也需要展示每个页面是否已完成过，也就是从这个环节是否完成并且前往了下一个环节，如果已经完成了则从0到1，如果没有完成则是0，也就是当该页面状态值为1的时候，下一个环节按钮也会亮并生效

		- 页面卡片形式展示

			- 正面

				- 正面是单词和音标

				- 卡片按钮

					- 右上角又发音的喇叭

					- 认识

					- 不认识

			- 返回

				- 中文

				- 卡片按钮

					- 右上角又发音的喇叭

					- 上一个

					- 下一个

						- 当该卡片为该章节的最后一张卡片的时候，此时点下一个则变成开始学习按钮，进入到学习环节，

			- 点击可以反转

			- 此时要又页面状态：记录现在是第几张单词卡片，且是正面还是反面

			- 同时在缓存中需要又集合类似的数据结构：
来分别存储认识和不认识的单词集合，方便后期展示

	- 正式的学习中 

		- 按钮

			- 在顶部为工具栏

			- 发音

				- 英音

				- 美音

			- 批注模式

				- 打开了批注模式才显示这些工具

					- 激光笔

					- 荧光笔

					- 圆珠笔

					- 橡皮

						- 整个擦除

						- 部分擦除

					- 胶带

						- 可以遮挡一部分，点击就只留下外框，再次点击就再次遮挡。只能使用整个擦除的橡皮擦掉

						- 做一个矩形 Tape 对象：
初始状态（遮挡）：
fill：半透明浅色（像胶带）
stroke：边框颜色
corner controls：允许拖动缩放（调整宽高）
点击后（揭示）：
fill 设为透明（或 opacity=0），只保留 stroke
也可以再点一次恢复遮挡（做成 toggle）
工具栏输入宽度：提供“胶带宽度/高度”滑条或输入框，实时改 rect 的 size

					- 形状

						- 方形

						- 圆形

						- 直线

					- 清空

					- 内容上叠加一层Canvas覆盖层 + Fabric.js 

						- 每一页单独保留一份批注数据：Fabric的json文件

						- 用这几个字段组合，保证不会串页、不会串课：
courseId：课程/课次 ID
pageId：课件页 ID（或页码 pageIndex）
contentVersion：课件内容版本号（你说“课程内容变化了要清空”，靠它判断）
teacherId（可选）：避免多老师账号混
Key 示例：
anno:{teacherId}:{courseId}:{contentVersion}:{pageId}

						- 保存时机（你要的“自动/手动清空”都能覆盖）
实时保存（建议）：每次“笔画结束 stroke:end”后，做一次防抖保存（比如 500ms 内只保存一次）
翻页保存（必须）：离开当前页前保存一次
优先用 IndexedDB（更稳、容量大、不会轻易爆 localStorage 限制）

						- “3小时后自动清除 / 内容变化清除 / 下课清除”
把它做成一套“批注会话 Session”规则，而不是到处 if 判断。

建议的批注会话元数据（Meta）
每节课进入时记录：
sessionStartAt：进入教室的时间
ttlHours = 3：超时阈值
courseId
contentVersion
ended：是否已下课（true/false）
自动清除触发条件（你想要的都覆盖）
内容变化清除（最重要）

如果当前课件 contentVersion 和缓存里记录的不一致：
→ 直接不加载旧批注（视为已失效），并可顺手清理旧 Key
超时清除（3 小时）
进入教室时检查：now - sessionStartAt > 3h
→ 提示“已超时，批注将清空”（或直接清空）
下课清除
点击“下课”：（按你现在说的）：默认清空
ended=true 后清理本课所有 pageId 的批注 key

					- 需要保留上课过程中的标准痕迹，这些标准是否清除，则是根据我是否下课，当时间超过了3个小时则自动清除，或者点击了下课自动清除，或者现在课程对象发生了变化自动清除

			- 推题

				- 可以选择第几题，如果只有一道题目，则不提供选择，否则可以提供选择

				- 题目的每道题目都要又自己的状态，表面是完成还是未完成，正确还是错误。

				- 答对了可以增加2个积分

			- 计时

				- 倒计时

				- 正计时

			- 随机

				- 骰子

				- 学生名字

		- 内容

			- 单词

			- 音标

			- 中文

			- 例句

			- 短语

			- 近义词

			- 反义词

			- 自然拼读

	- 游戏环节

		- 连连看

		- 打地鼠

		- 拼词

	- 最后下载一个学习反馈

		- 本节课的所有单词，展示那些是那些掌握的比较好，那些还需复习，那些错题

- 布局

	- 左边为展示的屏幕

		- 左上角选择投屏浏览器的还是整个屏幕电脑的

		- 同学发送的花和其他奖励，回在屏幕上从下往上输送，范围只在底部的三分之一

		- 而弹幕则会在顶部的三分之一，从左往右发送

	- 右边为直播

		- 第一个是老师的摄像头

		- 下面为其他同学的摄像头，默认都是关闭的，只有图片占位，每个方框界面上都有，麦克风和摄像头的功能，点击打开摄像头，将会让学生摄像头持续120秒

		- 下面为评论的区域，可以允许学生再次进行发送评论，且要求连续发送间隔必须为3秒。

		- 还有举手功能，学生点击举手之后会将该学生的头像周围泛着黄光，同时按照举手顺序，排序头像框的顺序。

		- 右键某个学生的视频框，可以选择送花，送烟花，大拇指

			- 在屏幕上会展示表扬效果，可以看到他的名字加上花花或者发送的奖励

			- 这些奖励可以自定义

		- 学生还可以送花，送烟花，弹幕，大拇指，哭脸

			- 发弹幕需要靠积分，每次发弹幕都需要5个积分

			- 其他的则需要1个积分

			- 每个人除了弹幕以外都有一次免费的机会

## 阅读

### 展示文章，然后推不同的题目

## 语法

### 可以先展示语法知识，然后推不同的题目

## 作文

### 先放50张白板

### 可以展示白板，然后推题

